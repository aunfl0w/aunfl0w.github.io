<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="generator" content="Hugo 0.102.3" />
  <link rel="canonical" href="https://aunfl0w.github.io/2018/functional/">

  
    
    <meta name="description" content="Functional Thinking For functional programming.
A Non Functional Aproach This is a sample program that processes a generated sample list of data. With the list of data it performs common operations such as find items, count types, sum things up etc. Do you see the duplicate code that is copy pasted with small changes? Can you tell what each loop is doing without thinking about what is going on in the loop or using the comments?">
  

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" type="text/css" href="/css/paper.css">

  
  
  <link rel="stylesheet" type="text/css" href="/css/custom.css">
  
  
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-125094479-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
  

  
  
  <title>Functional Thinking | Aun&#39;s Blog</title>
</head>

  <body>
    <div class="container paper">
      <nav class="border split-nav">
  <div class="nav-brand">
    <h3><a href="/">Aun&#39;s Blog</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
    <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
      
      </ul>
    </div>
  </div>
</nav>
      <main>
        

<h1 class="post-title">Functional Thinking</h1>


<strong>Publish date: </strong>Nov 16, 2018
<br>

  <strong>Tags: </strong>
  
    <a href="/tags/programming">programming</a>
  
    <a href="/tags/functional">functional</a>
  



  

<div class="child-borders">
  <div class="toc border" aria-labelledby="toc-heading">
    <h2 id="toc-heading">Table of contents</h2>
    <ol>
      
        <li>
          
          
          
          
          <a href="#a-non-functional-aproach">
            A Non Functional Aproach
          </a>
        </li>
      
        <li>
          
          
          
          
          <a href="#a-little-functional">
            A little functional
          </a>
        </li>
      
        <li>
          
          
          
          
          <a href="#functional-testing">
            Functional Testing
          </a>
        </li>
      
    </ol>
  </div>
</div>



<h1 id="functional-thinking">Functional Thinking</h1>
<p>For functional programming.</p>
<h2 id="a-non-functional-aproach">A Non Functional Aproach</h2>
<p>This is a sample program that processes a generated sample list of data.  With the list of data it performs common operations such as find items, count types, sum things up etc.  Do you see the duplicate code that is copy pasted with small changes? Can you tell what each loop is doing without thinking about what is going on in the loop or using the comments?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		List<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;</span> listOfItems <span style="color:#f92672">=</span> DataGenerator<span style="color:#f92672">.</span><span style="color:#a6e22e">makeDataList</span><span style="color:#f92672">((</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">random</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> 10000<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// total count
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total number of items is: &#34;</span> <span style="color:#f92672">+</span> listOfItems<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// find how many are &#34;cookies&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">int</span> cookiesCount <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Item i <span style="color:#f92672">:</span> listOfItems<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i<span style="color:#f92672">.</span><span style="color:#a6e22e">type</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>					<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i<span style="color:#f92672">.</span><span style="color:#a6e22e">type</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;cookie&#34;</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>						cookiesCount<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>					<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Cookies Count is: &#34;</span> <span style="color:#f92672">+</span> cookiesCount<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// sum up the cost
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">double</span> totalCost <span style="color:#f92672">=</span> 0<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Item i <span style="color:#f92672">:</span> listOfItems<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>				totalCost <span style="color:#f92672">+=</span> i<span style="color:#f92672">.</span><span style="color:#a6e22e">cost</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total Cost: &#34;</span> <span style="color:#f92672">+</span> totalCost<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// how many are YELLOW
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">int</span> yellowCount <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Item i <span style="color:#f92672">:</span> listOfItems<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">==</span> Item<span style="color:#f92672">.</span><span style="color:#a6e22e">Color</span><span style="color:#f92672">.</span><span style="color:#a6e22e">YELLOW</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>					yellowCount<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total Yellow count: &#34;</span> <span style="color:#f92672">+</span> totalCost<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span></span></span></code></pre></div>
<p>Did you spot the not so obvious error that the compiler can&rsquo;t warn you about using this pattern?  I&rsquo;ll give you a hint, the Total Yellow count is not the cost.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>Total number of items is: 4739
</span></span><span style="display:flex;"><span>Cookies Count is: 41
</span></span><span style="display:flex;"><span>Total Cost: 120428.0834048946
</span></span><span style="display:flex;"><span>Total Yellow count: 120428.0834048946</span></span></code></pre></div>
<p>This strategy can work, assuming you avoid the copy paste rename error in the example, but several things can be improved.  Look at all that duplicated code.  We make use of the java for each loop syntax to reduce the code, but this is realy syntactic sugar for iterators.  Look at how much repeated code you have to read through to see what is going on.  Really all the code wants to ask is type cookie, type has space, count how many are yellow.  Why do we need all the counters and loops? We don&rsquo;t.</p>
<p>Let&rsquo;s try some functional programming.</p>
<h2 id="a-little-functional">A little functional</h2>
<p>In OO the discussions talk a lot about Is-A relationships and composition we change to a users of function relationship.  This provides a more felixble way to use and compose solutions.  Why do we say function instead of method?  methods is used to imply that an ssociated with an object that has state and that the state of the object or system will be altered by calling the method.  Functional programmers mean specifically that a function takes input and works on it to process it&rsquo;s output and make no other changes in the state of the world.  OO is about encapsulation, functional is about isolation.  There is no restriction in java that lambda functions don&rsquo;t change the state of the world, it is an expectation that you need to adhear to so you avoid surprising (and breaking code) of consumers.</p>
<p>Here is an example useing List streams.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		List<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;</span> listOfItems <span style="color:#f92672">=</span> DataGenerator<span style="color:#f92672">.</span><span style="color:#a6e22e">makeDataList</span><span style="color:#f92672">((</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">random</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> 10000<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// total count
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total number of items is: &#34;</span> <span style="color:#f92672">+</span> listOfItems<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// find how many are &#34;cookies&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">long</span> cookiesCount <span style="color:#f92672">=</span> listOfItems<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">stream</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">((</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">type</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">((</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">type</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;cookie&#34;</span><span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">.</span><span style="color:#a6e22e">count</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Cookies Count is: &#34;</span> <span style="color:#f92672">+</span> cookiesCount<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// sum up the cost
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			<span style="color:#66d9ef">double</span> totalCost <span style="color:#f92672">=</span> listOfItems<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a6e22e">stream</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">((</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">(</span>x <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">cost</span> <span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">reduce</span><span style="color:#f92672">((</span>total<span style="color:#f92672">,</span> next<span style="color:#f92672">)-&gt;</span> total <span style="color:#f92672">+</span> next<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">orElse</span><span style="color:#f92672">(</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total Cost: &#34;</span> <span style="color:#f92672">+</span> totalCost<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">long</span> yellowCount <span style="color:#f92672">=</span> listOfItems<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a6e22e">stream</span><span style="color:#f92672">().</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">((</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">((</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">==</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">YELLOW</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">count</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total Yellow count: &#34;</span> <span style="color:#f92672">+</span> yellowCount<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span></span></span></code></pre></div></p>
<p>That&rsquo;s better.  We still have some repeated code and hard to read anonymous lambdas.  Let&rsquo;s pull those out and give them names.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Predicate<span style="color:#f92672">&lt;?</span> <span style="color:#66d9ef">super</span> Item<span style="color:#f92672">&gt;</span> NOT_NULL_TYPE <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">type</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Predicate<span style="color:#f92672">&lt;?</span> <span style="color:#66d9ef">super</span> Item<span style="color:#f92672">&gt;</span> NOT_NULL <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Predicate<span style="color:#f92672">&lt;?</span> <span style="color:#66d9ef">super</span> Item<span style="color:#f92672">&gt;</span> COOKIES <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">type</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;cookie&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Function<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">,</span> Double<span style="color:#f92672">&gt;</span> GET_COST <span style="color:#f92672">=</span> x <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">cost</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> BinaryOperator<span style="color:#f92672">&lt;</span>Double<span style="color:#f92672">&gt;</span> SUM_COST <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>total<span style="color:#f92672">,</span> next<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> total <span style="color:#f92672">+</span> next<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Predicate<span style="color:#f92672">&lt;?</span> <span style="color:#66d9ef">super</span> Item<span style="color:#f92672">&gt;</span> COLOR_YELLOW <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">==</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">YELLOW</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		List<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;</span> listOfItems <span style="color:#f92672">=</span> DataGenerator<span style="color:#f92672">.</span><span style="color:#a6e22e">makeDataList</span><span style="color:#f92672">((</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">random</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> 10000<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total number of items is: &#34;</span> <span style="color:#f92672">+</span> listOfItems<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">long</span> cookiesCount <span style="color:#f92672">=</span> listOfItems
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>NOT_NULL_TYPE<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>COOKIES<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">count</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Cookies Count is: &#34;</span> <span style="color:#f92672">+</span> cookiesCount<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">double</span> totalCost <span style="color:#f92672">=</span> listOfItems
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>NOT_NULL<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">(</span>GET_COST<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">reduce</span><span style="color:#f92672">(</span>SUM_COST<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">orElse</span><span style="color:#f92672">(</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total Cost: &#34;</span> <span style="color:#f92672">+</span> totalCost<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">long</span> yellowCount <span style="color:#f92672">=</span> listOfItems
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>NOT_NULL<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>COLOR_YELLOW<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">count</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total Yellow count: &#34;</span> <span style="color:#f92672">+</span> yellowCount<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span></span></span></code></pre></div>
<p>Now I can clearly ready what is going on.  No looping code and filtering.  No state counters.  And if the lists are large we can easily use parallel streams to use all the cores available without any overhead of managing parllel processing.</p>
<p>Let&rsquo;s add some timing and try parallel.  Adding some more modularization that will ease testing and also allow for addding timing.  The timing messages can also be tested too, however the time take to run cannot be konwn.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Predicate<span style="color:#f92672">&lt;?</span> <span style="color:#66d9ef">super</span> Item<span style="color:#f92672">&gt;</span> NOT_NULL_TYPE <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">type</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Predicate<span style="color:#f92672">&lt;?</span> <span style="color:#66d9ef">super</span> Item<span style="color:#f92672">&gt;</span> NOT_NULL <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Predicate<span style="color:#f92672">&lt;?</span> <span style="color:#66d9ef">super</span> Item<span style="color:#f92672">&gt;</span> COOKIES <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">type</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;cookie&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Function<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">,</span> Double<span style="color:#f92672">&gt;</span> GET_COST <span style="color:#f92672">=</span> x <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">cost</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> BinaryOperator<span style="color:#f92672">&lt;</span>Double<span style="color:#f92672">&gt;</span> SUM_COST <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>total<span style="color:#f92672">,</span> next<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> total <span style="color:#f92672">+</span> next<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Predicate<span style="color:#f92672">&lt;?</span> <span style="color:#66d9ef">super</span> Item<span style="color:#f92672">&gt;</span> COLOR_YELLOW <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">==</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">YELLOW</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		List<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;</span> listOfItems <span style="color:#f92672">=</span> DataGenerator<span style="color:#f92672">.</span><span style="color:#a6e22e">makeDataList</span><span style="color:#f92672">((</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">random</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> 50_000_000<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total number of items is: &#34;</span> <span style="color:#f92672">+</span> listOfItems<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">long</span> cookiesCount <span style="color:#f92672">=</span> timed<span style="color:#f92672">(()</span> <span style="color:#f92672">-&gt;</span> countCookies<span style="color:#f92672">(</span>listOfItems<span style="color:#f92672">),</span><span style="color:#e6db74">&#34;cookie time &#34;</span><span style="color:#f92672">,</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Cookies Count is: &#34;</span> <span style="color:#f92672">+</span> cookiesCount<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">double</span> totalCost <span style="color:#f92672">=</span> timed<span style="color:#f92672">(()</span> <span style="color:#f92672">-&gt;</span> sumCost<span style="color:#f92672">(</span>listOfItems<span style="color:#f92672">),</span> <span style="color:#e6db74">&#34;cost time &#34;</span><span style="color:#f92672">,</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total Cost: &#34;</span> <span style="color:#f92672">+</span> totalCost<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">long</span> yellowCount <span style="color:#f92672">=</span> timed<span style="color:#f92672">(()</span> <span style="color:#f92672">-&gt;</span> countYellow<span style="color:#f92672">(</span>listOfItems<span style="color:#f92672">),</span> <span style="color:#e6db74">&#34;yellow time &#34;</span><span style="color:#f92672">,</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Total Yellow count: &#34;</span> <span style="color:#f92672">+</span> yellowCount<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#f92672">&lt;</span>A<span style="color:#f92672">&gt;</span> A <span style="color:#a6e22e">timed</span><span style="color:#f92672">(</span>Supplier<span style="color:#f92672">&lt;</span>A<span style="color:#f92672">&gt;</span> code<span style="color:#f92672">,</span> String description<span style="color:#f92672">,</span> Consumer<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> output<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">long</span> start <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date<span style="color:#f92672">().</span><span style="color:#a6e22e">getTime</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		A result <span style="color:#f92672">=</span> code<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">long</span> end <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date<span style="color:#f92672">().</span><span style="color:#a6e22e">getTime</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		output<span style="color:#f92672">.</span><span style="color:#a6e22e">accept</span><span style="color:#f92672">(</span>description <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>end <span style="color:#f92672">-</span> start<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">countYellow</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;</span> listOfItems<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">long</span> yellowCount <span style="color:#f92672">=</span> listOfItems
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>NOT_NULL<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>COLOR_YELLOW<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">count</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> yellowCount<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">double</span> <span style="color:#a6e22e">sumCost</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;</span> listOfItems<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">double</span> totalCost <span style="color:#f92672">=</span> listOfItems
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>NOT_NULL<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">(</span>GET_COST<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">reduce</span><span style="color:#f92672">(</span>SUM_COST<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">orElse</span><span style="color:#f92672">(</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> totalCost<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">countCookies</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;</span> listOfItems<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">long</span> cookiesCount <span style="color:#f92672">=</span> listOfItems
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>NOT_NULL_TYPE<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">(</span>COOKIES<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">.</span><span style="color:#a6e22e">count</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> cookiesCount<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span></span></span></code></pre></div>
<p>Time single threaded:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>Total number of items is: 49829173
</span></span><span style="display:flex;"><span>cookie time 195
</span></span><span style="display:flex;"><span>Cookies Count is: 424299
</span></span><span style="display:flex;"><span>cost time 428
</span></span><span style="display:flex;"><span>Total Cost: 1.2467238787011356E9
</span></span><span style="display:flex;"><span>yellow time 402
</span></span><span style="display:flex;"><span>Total Yellow count: 623121</span></span></code></pre></div></p>
<p>Time multithreaded just by chaning .stream() to .parallelStream() on my 8 core computer we see a substantial speedup.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>Total number of items is: 29870890
</span></span><span style="display:flex;"><span>cookie time 145
</span></span><span style="display:flex;"><span>Cookies Count is: 254596
</span></span><span style="display:flex;"><span>cost time 95
</span></span><span style="display:flex;"><span>Total Cost: 7.471945593804344E8
</span></span><span style="display:flex;"><span>yellow time 57
</span></span><span style="display:flex;"><span>Total Yellow count: 372934</span></span></code></pre></div></p>
<h2 id="functional-testing">Functional Testing</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> functional<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertEquals<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomeFunctionalTest</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> ArrayList<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;</span> testData <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		testData<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Item<span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>				<span style="color:#e6db74">&#34;cookie&#34;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>				Color<span style="color:#f92672">.</span><span style="color:#a6e22e">BLUE</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>				1<span style="color:#f92672">.</span><span style="color:#a6e22e">00</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>		testData<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Item<span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>				<span style="color:#e6db74">&#34;toaster&#34;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>				Color<span style="color:#f92672">.</span><span style="color:#a6e22e">YELLOW</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>				20<span style="color:#f92672">.</span><span style="color:#a6e22e">00</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>		testData<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Item<span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>				<span style="color:#e6db74">&#34;electric eel&#34;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>				Color<span style="color:#f92672">.</span><span style="color:#a6e22e">YELLOW</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>				Math<span style="color:#f92672">.</span><span style="color:#a6e22e">PI</span> <span style="color:#f92672">*</span> 100<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span>
</span></span><span style="display:flex;"><span>				<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testTimed</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		AtomicReference<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> output <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AtomicReference<span style="color:#f92672">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">final</span> String logMessage <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;make a bunny &#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>		SomeFunctional<span style="color:#f92672">.</span><span style="color:#a6e22e">timed</span><span style="color:#f92672">(()-&gt;</span> logMessage<span style="color:#f92672">,</span> logMessage<span style="color:#f92672">,</span> output<span style="color:#f92672">::</span>set<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		String timeoutput <span style="color:#f92672">=</span> output<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		assertTrue<span style="color:#f92672">(</span>timeoutput<span style="color:#f92672">.</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span>logMessage<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testCountYellow</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		assertEquals<span style="color:#f92672">(</span>2<span style="color:#f92672">,</span> 
</span></span><span style="display:flex;"><span>				SomeFunctional<span style="color:#f92672">.</span><span style="color:#a6e22e">countYellow</span><span style="color:#f92672">(</span>testData<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testSumCost</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">double</span> expectedTotal <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>				Math<span style="color:#f92672">.</span><span style="color:#a6e22e">PI</span> <span style="color:#f92672">*</span> 100<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span> <span style="color:#f92672">+</span> 20<span style="color:#f92672">.</span><span style="color:#a6e22e">00</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">.</span><span style="color:#a6e22e">00</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>		assertEquals<span style="color:#f92672">(</span>expectedTotal<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>				SomeFunctional<span style="color:#f92672">.</span><span style="color:#a6e22e">sumCost</span><span style="color:#f92672">(</span>testData<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testCountCookies</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		assertEquals<span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> 
</span></span><span style="display:flex;"><span>				SomeFunctional<span style="color:#f92672">.</span><span style="color:#a6e22e">countCookies</span><span style="color:#f92672">(</span>testData<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div>
<p>source <a href="https://github.com/aunfl0w/experiments/tree/master/src/main/java/functional">available here</a></p>




      </main>
  </div>
  </body>
</html>
